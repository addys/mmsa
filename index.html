<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="mmsa">
<head>

    <!-- META -->
    <meta charset="utf-8">

    <!-- SCROLLS -->
    <link rel="stylesheet" href="css.css">    

   <!-- SPELLS -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.min.js"></script><!-- load angular -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular-route.js"></script><!-- load angular -->
    
    <script lang="javascript">
    
    var mmsa = angular.module('mmsa', ['ngRoute']); 
    
    mmsa.config(function($routeProvider){
        $routeProvider
        .when("/main", {
            templateUrl: "mainview.html",
            controller: "mainController"
        })
        .when("/summary", {
            templateUrl: "summaryview.html",
            controller: "summaryController"
        })
        .otherwise({redirectTo: "/main"});
    });

    mmsa.controller('mainController', function($scope, $http, $location) {
        $scope.formData = {};

        // when landing on the page, get all sections and show them
        $http.get('/api/sections')
            .success(function(data) {
                $scope.sections = data;
                //console.log(data);
            })
            .error(function(data) {
                console.log('Error: ' + data);
            });

    mmsa.controller('summaryController',  function() {
        
        });  


        $scope.save = function() {            
                $http.post('/api/sections', $scope.sections)
                    .success(function(data) {
                        
                        //$scope.formData = {}; // clear the form so our user is ready to enter another
                        $location.path('/summary');
                        
                        //$scope.todos = data;
                        //console.log(data);
                    })
                    .error(function(data) {
                        console.log('Error: ' + data);
                    });  
        };
            
    });

</script>    
   
    
</head>

<body>

<div class="top-marquee-bg" style="background-image:url(https://venturesblob.blob.core.windows.net/generaluploads/1600x460_bw1.jpg);background-color:#ffffff;">
    <div class="top-marquee-bg-texture" style="background-image:url(https://venturesblob.blob.core.windows.net/generaluploads/patternChevron.png);"></div>
    <h1 style="color:white; padding-left:50px;" valign="center"><br/><img src="growbw.png" height="100" width="100">Company Maturity Model - Self Assessment</h1>
</div>

<div ng-view>

 </div>
 
</body>

</html>